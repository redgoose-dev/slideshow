var de=Object.defineProperty,re=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;var ee=(a,m,l)=>m in a?de(a,m,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[m]=l,J=(a,m)=>{for(var l in m||(m={}))ce.call(m,l)&&ee(a,l,m[l]);if(Y)for(var l of Y(m))ue.call(m,l)&&ee(a,l,m[l]);return a},W=(a,m)=>re(a,ne(m));import{I as V,_ as I,i as A,c as j,a as pe,b as _e,d as te}from"./index.af6a9c05.js";import{B as N,v as se,o as oe}from"./Basic.2c927cb6.js";import{F as D}from"./Text.ec5343a7.js";import{F as Z}from"./Radio.1df5e1ec.js";import{C as fe,D as me,o as h,b as k,k as f,h as t,t as d,u as e,B as be,r as M,F as le,j as ae,n as R,i as U,z as G,A as B,p as q,m as z,g as O,a as he,e as K,T as ie}from"./vendor.c3f15dfd.js";const ye=fe({name:"PreferenceDataButtonIcon",components:{Icon:V},props:{iconName:String,title:String}}),ve=["title"];function ge(a,m,l,o,s,c){const y=me("Icon");return h(),k("button",{type:"button",title:a.title,class:"button-icon"},[f(y,{"icon-name":a.iconName},null,8,["icon-name"])],8,ve)}var $e=I(ye,[["render",ge],["__scopeId","data-v-2958fe58"]]);const ke={class:"modal-wrapper__header"},Se=["title"],we={class:"modal-wrapper__body"},Ue={props:{title:{type:String,default:"Title"}},emits:{close:null},setup(a,{emit:m}){const{t:l}=A.global;return(o,s)=>(h(),k("article",{class:"modal-wrapper",onClick:s[2]||(s[2]=c=>o.$emit("close"))},[t("div",{class:"modal-wrapper__box",onClick:s[1]||(s[1]=c=>{c.stopPropagation()})},[t("header",ke,[t("h2",null,d(a.title),1),t("nav",null,[t("button",{type:"button",title:e(l)("base.close"),onClick:s[0]||(s[0]=c=>o.$emit("close"))},[f(V,{"icon-name":"x"})],8,Se)])]),t("div",we,[be(o.$slots,"default",{},void 0,!0)])])]))}};var H=I(Ue,[["__scopeId","data-v-27c2820a"]]);const Ce=["data-key"],Te=["data-key"],Ve={class:"data-slide__handle"},xe={class:"data-slide__body"},De={key:0},Ie=["href"],Me=["href"],Ge={class:"data-slide__nav"},Ke=["title","onClick"],Ee=["title","onClick"],Fe={key:0,class:"data-slides__empty"},Ae={props:{itemKey:String,items:{type:Array,required:!0}},emits:{"change-order":null,edit:null,remove:null},setup(a,{emit:m}){const l=a,{t:o}=A.global;let s=M({dragStartKey:void 0,dragPlaceholderKey:void 0}),c,y;function g(b){return b.dataset.key?b:b.closest("li")}function v(b){c=b.target}function r(b){if(!c.closest(".data-slide__handle > i")){b.preventDefault();return}c=g(b.target),y=c.parentNode.children,s.dragStartKey=Number(c.dataset.key);for(let S=0;S<y.length;S++)y[S].addEventListener("dragover",p),y[S].addEventListener("drop",n),y[S].addEventListener("dragend",$)}function p(b){b.preventDefault&&b.preventDefault(),b.dataTransfer.dropEffect="move";let S=g(b.target);s.dragPlaceholderKey=Number(S.dataset.key)}function n(b){let S=g(b.target);if(s.dragStartKey===s.dragPlaceholderKey)return;let C=j(l.items);C.splice(s.dragStartKey,1),C.splice(Number(S.dataset.key),0,j(l.items[s.dragStartKey])),context.emit("change-order",C)}function $(){if(!!(c&&y)){for(let b=0;b<y.length;b++)y[b].removeEventListener("dragover",p),y[b].removeEventListener("drop",n),y[b].removeEventListener("dragend",$);c=void 0,y=void 0,s.dragStartKey=void 0,s.dragPlaceholderKey=void 0}}return(b,S)=>(h(),k("ul",{"data-key":a.itemKey,class:"data-slides"},[(h(!0),k(le,null,ae(a.items,(C,E)=>(h(),k("li",{"data-key":E,draggable:!0,class:R(["data-slide",e(s).dragStartKey===E&&"data-slide--start",e(s).dragStartKey!==e(s).dragPlaceholderKey&&e(s).dragPlaceholderKey===E&&"data-slide--placeholder"]),onMousedown:v,onDragstart:r},[t("div",Ve,[t("i",null,[f(V,{"icon-name":"menu-flat"})])]),t("div",xe,[t("h4",{class:R(C.title?"":"none")},d(C.title||"None"),3),C.description?(h(),k("p",De,d(C.description),1)):U("",!0),t("nav",null,[t("a",{href:C.src,target:"_blank"},d(e(o)("base.image")),9,Ie),C.thumbnail?(h(),k("a",{key:0,href:C.thumbnail,target:"_blank"},d(e(o)("base.thumbnail")),9,Me)):U("",!0)])]),t("nav",Ge,[t("button",{type:"button",title:e(o)("base.edit"),class:"edit",onClick:u=>b.$emit("edit",E)},[f(V,{"icon-name":"edit"})],8,Ke),t("button",{type:"button",title:e(o)("base.remove"),class:"remove",onClick:u=>b.$emit("remove",E)},[f(V,{"icon-name":"x"})],8,Ee)])],42,Te))),256)),a.items&&a.items.length>0?U("",!0):(h(),k("li",Fe,d(e(o)("description.empty")),1))],8,Ce))}};var je=I(Ae,[["__scopeId","data-v-5d3e8550"]]);const Be=a=>(q("data-v-3af212e7"),a=a(),z(),a),Ne=Be(()=>t("legend",null,"Manage slides group fields",-1)),Oe={class:"fields"},Pe={class:"field-basic"},Le={class:"field-title"},Re={for:"pref_key",class:"required"},qe={class:"field-description"},ze={class:"field-basic__body"},Je={class:"field-basic"},We={class:"field-title"},Ze={for:"pref_name"},He={class:"field-description"},Qe={class:"field-basic__body"},Xe={class:"field-basic"},Ye={class:"field-title"},et={for:"pref_description"},tt={class:"field-description"},st={class:"field-basic__body"},ot={class:"field-basic"},lt={class:"field-title"},at={for:"pref_slideType"},it={class:"field-description"},dt={class:"field-basic__body"},rt={key:0,class:"field-basic"},nt={class:"field-title"},ct={for:"pref_slidesUrl"},ut={class:"field-description"},pt={class:"field-basic__body"},_t={class:"submit-buttons"},ft={props:{form:Object},emits:{submit:null},setup(a,{emit:m}){const l=a,{t:o}=A.global;let s=M({form:l.form,error:{key:!1},slides:{type:l.form.slidesType||"array",url:l.form.slidesUrl||""}});function c(g){g||(s.error.key=!0),s.error.key=!/^[a-zA-Z0-9_]+$/.test(g)}function y(g){g.preventDefault();try{if(s.error.key)throw new Error("error value / key");m("submit",s.form)}catch(v){window.dev&&console.error(v.message),alert(o("alert.errorSubmit"))}}return(g,v)=>(h(),k("form",{onSubmit:y},[t("fieldset",null,[Ne,t("div",Oe,[t("div",Pe,[t("h3",Le,[t("label",Re,d(e(o)("base.groupKey")),1)]),t("p",qe,d(e(o)("description.inputKeyOnGroup")),1),t("div",ze,[f(D,{name:"pref_key",id:"pref_key",placeholder:e(o)("base.inputKey"),inline:!0,required:!0,size:24,maxlength:20,color:e(s).error.key?"error":"",modelValue:e(s).form.key,"onUpdate:modelValue":[v[0]||(v[0]=r=>e(s).form.key=r),c]},null,8,["placeholder","color","modelValue"])])]),t("div",Je,[t("h3",We,[t("label",Ze,d(e(o)("base.name")),1)]),t("p",He,d(e(o)("description.setCategoryName")),1),t("div",Qe,[f(D,{name:"pref_name",id:"pref_name",placeholder:e(o)("base.inputText"),maxlength:32,modelValue:e(s).form.name,"onUpdate:modelValue":v[1]||(v[1]=r=>e(s).form.name=r)},null,8,["placeholder","modelValue"])])])]),t("div",Xe,[t("h3",Ye,[t("label",et,d(e(o)("base.description")),1)]),t("p",tt,d(e(o)("description.setCategoryDescription")),1),t("div",st,[f(D,{name:"pref_description",id:"pref_description",placeholder:e(o)("base.inputText"),maxlength:80,modelValue:e(s).form.description,"onUpdate:modelValue":v[2]||(v[2]=r=>e(s).form.description=r)},null,8,["placeholder","modelValue"])])]),t("div",ot,[t("h3",lt,[t("label",at,d(e(o)("title.selectSlidesType")),1)]),t("p",it,d(e(o)("description.selectSlidesType"))+" "+d(a.form.type==="edit"?e(o)("description.selectSlidesType2"):""),1),t("div",dt,[f(Z,{type:"button",name:"pref_slideType",id:"prof_slideType",title:e(o)("title.selectSlidesType"),items:[{key:"array",label:e(o)("base.array")},{key:"url",label:`URL ${e(o)("base.address")}`}],modelValue:e(s).form.slidesType,"onUpdate:modelValue":v[3]||(v[3]=r=>e(s).form.slidesType=r)},null,8,["title","items","modelValue"])])]),e(s).form.slidesType==="url"?(h(),k("div",rt,[t("h3",nt,[t("label",ct,d(e(o)("title.slidesUrlAddress")),1)]),t("p",ut,d(e(o)("description.inputSlidesUrl")),1),t("div",pt,[f(D,{name:"pref_slidesUrl",id:"pref_slidesUrl",placeholder:e(o)("base.inputUrl"),required:!0,modelValue:e(s).form.slidesUrl,"onUpdate:modelValue":v[4]||(v[4]=r=>e(s).form.slidesUrl=r)},null,8,["placeholder","modelValue"])])])):U("",!0),t("nav",_t,[t("div",null,[f(N,{type:"submit",color:"key",inline:!0},{default:G(()=>[B(d(a.form.type==="add"?e(o)("label.addGroup"):e(o)("label.editGroup")),1)]),_:1})])])])],32))}};var mt=I(ft,[["__scopeId","data-v-3af212e7"]]);const bt=a=>(q("data-v-7af839c4"),a=a(),z(),a),ht=bt(()=>t("legend",null,"Manage slide fields",-1)),yt={class:"fields"},vt={class:"field-basic"},gt={class:"field-title"},$t={for:"pref_src",class:"required"},kt={class:"field-description"},St={class:"field-multiple"},wt={class:"field-multiple__body"},Ut={class:"field-basic"},Ct={class:"field-title"},Tt={for:"pref_thumbnail"},Vt={class:"field-description"},xt={class:"field-multiple"},Dt={class:"field-multiple__body"},It={class:"field-basic"},Mt={class:"field-title"},Gt={for:"pref_title"},Kt={class:"field-description"},Et={class:"field-basic__body"},Ft={class:"field-basic"},At={class:"field-title"},jt={for:"pref_description"},Bt={class:"field-description"},Nt={class:"field-basic__body"},Ot={class:"submit-buttons"},Pt={props:{form:Object},emits:{submit:null},setup(a,{emit:m}){const l=a,{t:o}=A.global;let s=M({form:l.form});const c=O(null),y=O(null);function g(r){if(se(s.form[r]))window.open(s.form[r]);else switch(alert(o("alert.invalidAddress")),r){case"src":c.value.focus();break;case"thumbnail":y.value.focus();break}}function v(r){r.preventDefault();try{if(!(s.form.src&&se(s.form.src)))throw c.value.focus(),new Error("no image src address");m("submit",s.form)}catch(p){window.dev&&console.error(p.message),alert(o("alert.errorSubmit"))}}return(r,p)=>(h(),k("form",{onSubmit:v},[t("fieldset",null,[ht,t("div",yt,[t("div",vt,[t("h3",gt,[t("label",$t,d(e(o)("base.imageUrl")),1)]),t("p",kt,d(e(o)("description.inputImageUrl")),1),t("div",St,[t("div",wt,[f(D,{ref:(n,$)=>{$.src=n,c.value=n},name:"pref_src",id:"pref_src",placeholder:e(o)("base.inputUrl"),required:!1,modelValue:e(s).form.src,"onUpdate:modelValue":p[0]||(p[0]=n=>e(s).form.src=n)},null,8,["placeholder","modelValue"])]),t("nav",null,[f(N,{type:"button",onClick:p[1]||(p[1]=n=>g("src"))},{default:G(()=>[B(d(e(o)("base.openUrl")),1)]),_:1})])])]),t("div",Ut,[t("h3",Ct,[t("label",Tt,d(e(o)("base.urlThumbnailUrl")),1)]),t("p",Vt,d(e(o)("description.inputThumbnailUrl")),1),t("div",xt,[t("div",Dt,[f(D,{ref:(n,$)=>{$.thumbnail=n,y.value=n},name:"pref_thumbnail",id:"pref_thumbnail",placeholder:e(o)("base.inputUrl"),modelValue:e(s).form.thumbnail,"onUpdate:modelValue":p[2]||(p[2]=n=>e(s).form.thumbnail=n)},null,8,["placeholder","modelValue"])]),t("nav",null,[f(N,{type:"button",onClick:p[3]||(p[3]=n=>g("thumbnail"))},{default:G(()=>[B(d(e(o)("base.openUrl")),1)]),_:1})])])]),t("div",It,[t("h3",Mt,[t("label",Gt,d(e(o)("base.subject")),1)]),t("p",Kt,d(e(o)("description.inputSlideTitle")),1),t("div",Et,[f(D,{name:"pref_title",id:"pref_title",placeholder:e(o)("base.inputText"),modelValue:e(s).form.title,"onUpdate:modelValue":p[4]||(p[4]=n=>e(s).form.title=n)},null,8,["placeholder","modelValue"])])]),t("div",Ft,[t("h3",At,[t("label",jt,d(e(o)("base.description")),1)]),t("p",Bt,d(e(o)("description.inputDescriptionSlide")),1),t("div",Nt,[f(D,{name:"pref_description",id:"pref_description",placeholder:e(o)("base.inputText"),modelValue:e(s).form.description,"onUpdate:modelValue":p[5]||(p[5]=n=>e(s).form.description=n)},null,8,["placeholder","modelValue"])])])]),t("nav",Ot,[t("div",null,[f(N,{type:"submit",color:"key",inline:!0},{default:G(()=>[B(d(a.form.type==="add"?e(o)("base.add"):e(o)("base.submitEdit")),1)]),_:1})])])])],32))}};var Lt=I(Pt,[["__scopeId","data-v-7af839c4"]]);const Rt={class:"manage-tree"},qt={class:"tree-item"},zt={class:"tree-item__header"},Jt=["title","disabled","onClick"],Wt={key:0},Zt={key:0},Ht=["title","onClick"],Qt=["title","onClick"],Xt=["title","onClick"],Yt={class:"add-tree"},es={props:{tree:{type:Object,required:!0}},emits:{update:null},setup(a,{emit:m}){const l=a,{t:o}=A.global;let s=M({fold:y(),dragPlaceholder:void 0,showManageGroup:!1,showManageSlide:!1,manageFormGroup:void 0,editFormSlide:void 0}),c=M({index:he(()=>Object.keys(l.tree).map(_=>W(J({},l.tree[_]),{fold:Array.isArray(l.tree[_].slides),key:_})))});function y(){let u={};return Object.keys(l.tree).forEach(_=>{u[_]=!1}),u}function g(u,_){let i=j(l.tree);i[u].slides=_,m("update",i)}function v(u,_=void 0){s.fold[u]=_===void 0?!s.fold[u]:_}function r(){s.manageFormGroup={type:"add",key:"",name:"",description:"",slidesType:"array",slidesUrl:""},s.showManageGroup=!0}function p(u){s.manageFormGroup={type:"edit",key:u,originalKey:u,name:l.tree[u].name,description:l.tree[u].description,slidesType:Array.isArray(l.tree[u].slides)?"array":"url",slidesUrl:typeof l.tree[u].slides=="string"?l.tree[u].slides:""},s.showManageGroup=!0}function n(u){if(!confirm(o("confirm.remove")))return;let _=j(l.tree);delete _[u],m("update",_)}function $(u){try{let F=function(X){if(!/^[a-zA-Z0-9_]+$/.test(X))throw new Error("Error key");if(l.tree[X])throw new Error("The value exists.");return _};const{key:_,originalKey:i,type:P,name:w,description:L,slidesUrl:Q}=u;let x,T=j(l.tree);switch(P){case"add":x=F(_),T[x]={name:w,description:L,slides:u.slidesType==="url"?u.slidesUrl:[]};break;case"edit":if(x=i!==_?F(_):_,!x)throw new Error("Not a valid key.");T[x]=W(J({},T[i]),{name:w,description:L}),u.slidesType==="url"?T[x].slides=u.slidesUrl:Array.isArray(T[x].slides)||(T[x].slides=[]),i!==_&&delete T[i];break}m("update",T),s.showManageGroup=!1}catch(_){window.dev&&console.error(_.message),alert(o("alert.errorSubmit"))}}function b(u){s.editFormSlide={type:"add",groupKey:u,src:"",thumbnail:"",title:"",description:""},s.showManageSlide=!0}function S(u,_){const i=l.tree[u].slides[_];s.editFormSlide={type:"edit",groupKey:u,key:_,src:i.src,thumbnail:i.thumbnail,title:i.title,description:i.description},s.showManageSlide=!0}function C(u,_){if(!confirm(o("confirm.remove")))return;let i=j(l.tree);i[u].slides.splice(_,1),m("update",i)}function E(u){const{type:_,groupKey:i,key:P,src:w,thumbnail:L,title:Q,description:x}=u;let T=j(l.tree);try{const F={src:w,thumbnail:L,title:Q,description:x};switch(_){case"add":T[i].slides.push(F);break;case"edit":T[i].slides[P]=F;break}v(i,!0),m("update",T),s.showManageSlide=!1}catch(F){window.dev&&console.error(F.message),alert(o("alert.errorSubmit"))}}return(u,_)=>(h(),k("article",Rt,[(h(!0),k(le,null,ae(e(c).index,(i,P)=>(h(),k("section",qt,[t("header",zt,[t("nav",null,[t("button",{type:"button",title:e(o)("title.fold"),disabled:!i.fold,class:R([i.fold?"fold":"minus",i.fold&&e(s).fold[i.key]&&"fold--on"]),onClick:w=>v(i.key)},[f(V,{"icon-name":i.fold?"arrow-down":"minus"},null,8,["icon-name"])],10,Jt)]),t("h3",null,[t("strong",null,[t("b",null,d(i.key),1),B(" "+d(i.name)+" ",1),i.fold?(h(),k("em",Wt,d(i.slides.length),1)):U("",!0)]),i.description?(h(),k("span",Zt,d(i.description),1)):U("",!0)]),t("nav",null,[i.fold?(h(),k("button",{key:0,type:"button",title:e(o)("label.addSlide"),class:"add",onClick:w=>b(i.key)},[f(V,{"icon-name":"plus"})],8,Ht)):U("",!0),t("button",{type:"button",title:e(o)("label.editGroup"),class:"edit",onClick:w=>p(i.key)},[f(V,{"icon-name":"edit"})],8,Qt),t("button",{type:"button",title:e(o)("label.removeGroup"),class:"remove",onClick:w=>n(i.key)},[f(V,{"icon-name":"x"})],8,Xt)])]),e(s).fold[i.key]&&i.fold?(h(),K(je,{key:0,"item-key":i.key,items:i.slides,onChangeOrder:w=>g(i.key,w),onEdit:w=>S(i.key,w),onRemove:w=>C(i.key,w)},null,8,["item-key","items","onChangeOrder","onEdit","onRemove"])):U("",!0)]))),256)),t("nav",Yt,[f(N,{title:e(o)("label.addGroup"),color:"key",onClick:r},{default:G(()=>[B(d(e(o)("label.addGroup")),1)]),_:1},8,["title"])]),(h(),K(ie,{to:"#slideshowModal"},[e(s).showManageGroup?(h(),K(H,{key:0,title:e(o)(e(s).manageFormGroup.type==="edit"?"label.editGroup":"label.addGroup"),class:"modal-edit-group",onClose:_[0]||(_[0]=i=>e(s).showManageGroup=!1)},{default:G(()=>[f(mt,{form:e(s).manageFormGroup,onSubmit:$},null,8,["form"])]),_:1},8,["title"])):U("",!0),e(s).showManageSlide?(h(),K(H,{key:1,title:e(o)(e(s).editFormSlide.type==="edit"?"label.editSlide":"label.addSlide"),class:"modal-edit-slide",onClose:_[1]||(_[1]=i=>e(s).showManageSlide=!1)},{default:G(()=>[f(Lt,{form:e(s).editFormSlide,onSubmit:E},null,8,["form"])]),_:1},8,["title"])):U("",!0)]))]))}};var ts=I(es,[["__scopeId","data-v-8fe99d3c"]]);const ss=["accept","disabled"],os={class:"form-upload__body"},ls={props:{name:String,id:String,label:{type:String,default:"Please upload file"},disabled:Boolean,accept:String},emits:["change"],setup(a,{expose:m,emit:l}){let o=M({filename:""});const s=O(null);function c(g){!(g.target.files&&g.target.files[0])||(o.filename=g.target.files[0].name,l("change",g.target.files))}function y(){s.value.focus()}return m({input:s,focus:y}),(g,v)=>(h(),k("label",{class:R(["form","form-upload",a.disabled&&"form-upload--disabled"])},[t("input",{ref:(r,p)=>{p.input=r,s.value=r},type:"file",class:"form-upload__input",accept:a.accept,disabled:a.disabled,onChange:c},null,40,ss),t("span",os,[f(V,{"icon-name":"file"}),t("em",null,d(e(o).filename||a.label),1),t("i",null,[f(V,{"icon-name":"upload"})])])],2))}};var as=I(ls,[["__scopeId","data-v-bb58139c"]]);const is=a=>(q("data-v-01b5f92e"),a=a(),z(),a),ds=is(()=>t("legend",null,"Import data fields",-1)),rs={class:"fields"},ns={class:"field-basic"},cs={class:"field-basic__body"},us={key:0,class:"field-basic"},ps={class:"field-title"},_s={for:"pref_address"},fs={class:"field-description"},ms={class:"field-basic__body"},bs={key:1,class:"field-basic"},hs={class:"field-title"},ys={for:"pref_address"},vs={class:"field-description"},gs={class:"field-basic__body"},$s={class:"submit-buttons"},ks={emits:{update:null},setup(a,{emit:m}){const{t:l}=A.global;let o=M({mode:"address",address:"https://raw.githubusercontent.com/redgoose-dev/slideshow/main/resource/example/tree.json",file:null,processing:!1});const s=O(null),c=O(null);function y(v){v[0]&&(o.file=v[0])}async function g(v){v.preventDefault(),o.processing=!0;try{let r;switch(o.mode){case"address":if(!o.address)throw s.value.focus(),new Error("no address");r=await _e(o.address);break;case"file":if(!o.file)throw c.value.focus(),new Error("no file");r=await pe(o.file);break;default:throw new Error("no mode")}Array.isArray(r)&&(r={default:{slides:r}}),te(r),m("update",r),o.processing=!1}catch(r){window.dev&&console.error(r.message),alert(l("alert.failedGetData")),o.processing=!1}}return(v,r)=>(h(),k("form",{class:"import-data",onSubmit:g},[t("fieldset",null,[ds,t("div",rs,[t("div",ns,[t("div",cs,[f(Z,{name:"pref_mode",id:"prof_mode",title:e(l)("description.importDataMethod"),items:[{key:"address",label:e(l)("base.address")},{key:"file",label:e(l)("base.file")}],modelValue:e(o).mode,"onUpdate:modelValue":r[0]||(r[0]=p=>e(o).mode=p)},null,8,["title","items","modelValue"])])]),e(o).mode==="address"?(h(),k("div",us,[t("h3",ps,[t("label",_s,d(e(l)("title.importDataByAddress")),1)]),t("p",fs,d(e(l)("description.getDataByRestAPI")),1),t("div",ms,[f(D,{ref:(p,n)=>{n.address=p,s.value=p},name:"pref_address",id:"pref_address",placeholder:e(l)("base.inputAddress"),modelValue:e(o).address,"onUpdate:modelValue":r[1]||(r[1]=p=>e(o).address=p)},null,8,["placeholder","modelValue"])])])):U("",!0),e(o).mode==="file"?(h(),k("div",bs,[t("h3",hs,[t("label",ys,d(e(l)("title.importDataByFile")),1)]),t("p",vs,d(e(l)("description.getJsonFile")),1),t("div",gs,[f(as,{ref:(p,n)=>{n.file=p,c.value=p},accept:"application/json",label:e(l)("description.selectJsonFile"),onChange:y},null,8,["label"])])])):U("",!0)]),t("nav",$s,[t("div",null,[f(N,{type:"submit",color:e(o).processing?"":"key",disabled:e(o).processing,inline:!0},{default:G(()=>[B(d(e(o).processing?e(l)("base.processing"):e(l)("label.getData")),1)]),_:1},8,["color","disabled"])])])])],32))}};var Ss=I(ks,[["__scopeId","data-v-01b5f92e"]]);const ws=a=>(q("data-v-470f5195"),a=a(),z(),a),Us={class:"pref-data"},Cs=ws(()=>t("legend",null,"Data fields",-1)),Ts={class:"fields"},Vs={class:"field-basic"},xs={class:"field-title"},Ds={class:"field-basic__body"},Is={class:"manage-tree"},Ms={class:"manage-tree-toolbar"},Gs={class:"manage-tree-body"},Ks={props:{structure:Object},emits:{update:null},setup(a,{emit:m}){const l=a,{t:o}=A.global;let s=M({mode:"basic",showImportData:!1,textTreeColor:void 0}),c=M({tree:s.mode==="advanced"?JSON.stringify(l.structure.tree,null,2):l.structure.tree}),y;function g(n){try{switch(n){case"basic":let $=JSON.parse(c.tree);!te($),c.tree=$,s.mode=n;break;case"advanced":c.tree=oe(c.tree),s.mode=n;break}}catch($){window.dev&&console.error($.message),alert(o("alert.invalidData"))}}function v(n){y&&clearTimeout(y),y=setTimeout(()=>{try{let $=JSON.parse(n);s.textTreeColor=void 0,m("update",{tree:$})}catch($){s.textTreeColor="error"}},600)}function r(n){c.tree=n,m("update",{tree:n})}function p(n){switch(s.mode){case"advanced":c.tree=oe(n);break;default:c.tree=n;break}m("update",{tree:n}),s.showImportData=!1}return(n,$)=>(h(),k("fieldset",Us,[Cs,t("div",Ts,[t("div",Vs,[t("h3",xs,d(e(o)("title.manageSlideData")),1),t("div",Ds,[t("div",Is,[t("nav",Ms,[t("div",null,[f(Z,{type:"button",name:"pref_mode",id:"prof_mode",title:e(o)("title.changeMode"),items:[{key:"basic",label:e(o)("base.basic")},{key:"advanced",label:e(o)("base.advanced")}],modelValue:e(s).mode,"onUpdate:modelValue":g,class:"manage-tree__mode"},null,8,["title","items","modelValue"])]),t("div",null,[f($e,{title:e(o)("title.importSlideData"),"icon-name":"download",class:"manage-tree__button",onClick:$[0]||($[0]=b=>e(s).showImportData=!0)},null,8,["title"])])]),t("div",Gs,[e(s).mode==="basic"?(h(),K(ts,{key:0,tree:e(c).tree,onUpdate:r},null,8,["tree"])):e(s).mode==="advanced"?(h(),K(D,{key:1,ref:(b,S)=>{S.tree=b},type:"textarea",name:"pref_tree",id:"pref_tree",placeholder:e(o)("description.inputSlideDataCode"),rows:15,color:e(s).textTreeColor,modelValue:e(c).tree,"onUpdate:modelValue":[$[1]||($[1]=b=>e(c).tree=b),v]},null,8,["placeholder","color","modelValue"])):U("",!0)])])])])]),(h(),K(ie,{to:"#slideshowModal"},[e(s).showImportData?(h(),K(H,{key:0,title:e(o)("title.getSlideItems"),class:"pref-data__import-data",onClose:$[2]||($[2]=b=>e(s).showImportData=!1)},{default:G(()=>[f(Ss,{onUpdate:p})]),_:1},8,["title"])):U("",!0)]))]))}};var Os=I(Ks,[["__scopeId","data-v-470f5195"]]);export{Os as default};
