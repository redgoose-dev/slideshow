"use strict";(self.webpackChunk_redgoose_slideshow=self.webpackChunk_redgoose_slideshow||[]).push([[879],{8469:function(e,t,a){function r(e){return"0".concat(e).slice(-2)}function l(e){var t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}function n(e){return JSON.stringify(e,null,2)}a.d(t,{jj:function(){return r},DN:function(){return l},IC:function(){return n}})},1630:function(e,t,a){a.d(t,{Z:function(){return o}});var r=a(6252),l=a(3577),n=["type","disabled","title"];var i=(0,r.aZ)({name:"ButtonBasic",props:{type:{type:String,default:"button"},title:String,color:String,disabled:Boolean},emits:{click:null}});var o=(0,a(3744).Z)(i,[["render",function(e,t,a,i,o,s){return(0,r.wg)(),(0,r.iD)("button",{type:e.type,disabled:e.disabled,title:e.title,class:(0,l.normalizeClass)(["button-basic",e.color&&"button-basic--color-".concat(e.color)]),onClick:t[0]||(t[0]=function(t){return e.$emit("click")})},[(0,r.WI)(e.$slots,"default",{},void 0,!0)],10,n)}],["__scopeId","data-v-1579453c"]])},269:function(e,t,a){a.d(t,{Z:function(){return p}});var r=a(6252),l=a(3577),n={class:"form-radio__wrap"},i={class:"form-radio__button"},o=["disabled","onClick"],s=["name","id","value","checked"];var d=a(3018),u=(0,r.aZ)({name:"FormRadio",props:{type:String,items:{type:Array,required:!0},name:String,id:String,inline:Boolean,modelType:String,modelValue:[String,Number,Boolean]},setup:function(e,t){return{onChange:function(a){t.emit("update:modelValue",(0,d.Ge)(e.modelType,a.target.value))},onClickItem:function(a){t.emit("update:modelValue",(0,d.Ge)(e.modelType,a))}}},emits:{"update:modelValue":null,"blur:modelValue":null}});const c=(0,a(3744).Z)(u,[["render",function(e,t,a,d,u,c){return(0,r.wg)(),(0,r.iD)("nav",{class:(0,l.normalizeClass)(["form form-radio",e.inline&&"form-radio--inline","button"===e.type&&"form-radio--button"])},[(0,r._)("div",n,["button"===e.type?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(e.items,(function(t,a){return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("button",{type:"button",disabled:e.modelValue===t.key||!e.modelValue&&0===a,onClick:function(a){return e.onClickItem(t.key)}},(0,l.toDisplayString)(t.label),9,o)])})),256)):((0,r.wg)(!0),(0,r.iD)(r.HY,{key:1},(0,r.Ko)(e.items,(function(a,n){return(0,r.wg)(),(0,r.iD)("label",null,[(0,r._)("input",{type:"radio",name:e.name,id:0===n?e.id:void 0,value:a.key,checked:e.modelValue===a.key||!e.modelValue&&0===n,onChange:t[0]||(t[0]=function(){return e.onChange&&e.onChange.apply(e,arguments)}),onBlur:t[1]||(t[1]=function(t){return e.$emit("blur:modelValue",t.target.value)})},null,40,s),(0,r._)("em",null,(0,l.toDisplayString)(a.label),1)])})),256))])],2)}],["__scopeId","data-v-68d9e15d"]]);var p=c},9108:function(e,t,a){a.d(t,{Z:function(){return c}});var r=a(6252),l=a(3577),n=["name","id","required","value","disabled"],i={key:0,value:"",disabled:!1};var o=a(3018),s=a(2362),d=(0,r.aZ)({name:"FormSelect",components:{Icon:s.Z},props:{name:{type:String,required:!0},id:String,disabled:Boolean,required:Boolean,placeholder:{type:[String,null],default:null},modelType:String,modelValue:[String,Number]},setup:function(e,t){return{onChange:function(a){t.emit("update:modelValue",o.Ge(e.modelType,a.target.value))}}},emits:{"update:modelValue":null,"blur:modelValue":null}});const u=(0,a(3744).Z)(d,[["render",function(e,t,a,o,s,d){var u=(0,r.up)("Icon");return(0,r.wg)(),(0,r.iD)("label",{class:(0,l.normalizeClass)(["form","form-select",e.disabled&&"form-select--disabled"])},[(0,r._)("select",{name:e.name,id:e.id,required:e.required,value:e.modelValue,disabled:e.disabled,class:"form-select__body",onChange:t[0]||(t[0]=function(){return e.onChange&&e.onChange.apply(e,arguments)}),onBlur:t[1]||(t[1]=function(t){return e.$emit("blur:modelValue",t.target.value)})},[e.placeholder?((0,r.wg)(),(0,r.iD)("option",i,(0,l.toDisplayString)(e.placeholder),1)):(0,r.kq)("v-if",!0),(0,r.WI)(e.$slots,"default",{},void 0,!0)],40,n),(0,r.Wm)(u,{"icon-name":"arrow-down",class:"form-select__icon"})],2)}],["__scopeId","data-v-0349d436"]]);var c=u},4997:function(e,t,a){a.d(t,{Z:function(){return c}});var r=a(6252),l=a(3577),n=["type","name","id","value","placeholder","required","min","max","step","maxlength","rows","size"],i=["type","name","id","value","placeholder","required","min","max","step","maxlength","size"];var o=a(2262),s=a(3018),d=(0,r.aZ)({name:"FormText",props:{type:{type:String,default:"text"},name:String,id:String,placeholder:String,required:Boolean,min:Number,max:Number,step:Number,maxlength:Number,inline:Boolean,rows:{type:Number,default:3},size:{type:Number,default:10},color:String,modelType:String,modelValue:[String,Number,Boolean,Array]},setup:function(e,t){var a=(0,o.iH)(0);return{root:a,onChange:function(a){t.emit("update:modelValue",s.Ge(e.modelType,a.target.value))},focus:function(){a.value&&a.value.focus()}}},emits:{"update:modelValue":null,"blur:modelValue":null}});const u=(0,a(3744).Z)(d,[["render",function(e,t,a,o,s,d){return"textarea"===e.type?((0,r.wg)(),(0,r.iD)("textarea",{key:0,ref:"root",type:e.type,name:e.name,id:e.id,value:e.modelValue,placeholder:e.placeholder,required:e.required,min:e.min,max:e.max,step:e.step,maxlength:e.maxlength,rows:e.rows,size:e.size,class:(0,l.normalizeClass)(["form","form-text",e.inline&&"form-text--inline",e.color&&"form-text--color-".concat(e.color)]),onInput:t[0]||(t[0]=function(){return e.onChange&&e.onChange.apply(e,arguments)}),onBlur:t[1]||(t[1]=function(t){return e.$emit("blur:modelValue",t.target.value)})},null,42,n)):((0,r.wg)(),(0,r.iD)("input",{key:1,ref:"root",type:e.type,name:e.name,id:e.id,value:e.modelValue,placeholder:e.placeholder,required:e.required,min:e.min,max:e.max,step:e.step,maxlength:e.maxlength,size:e.size,class:(0,l.normalizeClass)(["form","form-text",e.inline&&"form-text--inline",e.color&&"form-text--color-".concat(e.color)]),onInput:t[2]||(t[2]=function(){return e.onChange&&e.onChange.apply(e,arguments)}),onBlur:t[3]||(t[3]=function(t){return e.$emit("blur:modelValue",t.target.value)})},null,42,i))}],["__scopeId","data-v-237eca52"]]);var c=u},3879:function(e,t,a){a.r(t),a.d(t,{default:function(){return Kt}});var r=a(6252),l=a(3577),n={class:"pref-data"},i=function(e){return(0,r.dD)("data-v-5bd877e3"),e=e(),(0,r.Cn)(),e}((function(){return(0,r._)("legend",null,"Data fields",-1)})),o={class:"fields"},s={class:"field-basic"},d={class:"field-title"},u={class:"field-basic__body"},c={class:"manage-tree"},p={class:"manage-tree-toolbar"},m={class:"manage-tree-body"};var f=a(2262),b=a(5845),y=a(78),g=a(8469),_=a(4997),v=a(9108),h=a(269),S=["title"];var k=a(2362),w=(0,r.aZ)({name:"PreferenceDataButtonIcon",components:{Icon:k.Z},props:{iconName:String,title:String}}),D=a(3744);var C=(0,D.Z)(w,[["render",function(e,t,a,l,n,i){var o=(0,r.up)("Icon");return(0,r.wg)(),(0,r.iD)("button",{type:"button",title:e.title,class:"button-icon"},[(0,r.Wm)(o,{"icon-name":e.iconName},null,8,["icon-name"])],8,S)}],["__scopeId","data-v-624368b7"]]),$={class:"manage-tree"},U={class:"tree-item"},V={class:"tree-item__header"},x=["title","disabled","onClick"],T={key:0},I={key:0},Z=["title","onClick"],q=["title","onClick"],W=["title","onClick"],j={class:"add-tree"};var F=a(4942),B=a(1630),G={class:"modal-wrapper__header"},M=["title"],K={class:"modal-wrapper__body"};var O=(0,r.aZ)({name:"ModalWrapper",components:{Icon:k.Z},props:{title:{type:String,default:"Title"}},emits:{close:null}});var E=(0,D.Z)(O,[["render",function(e,t,a,n,i,o){var s=(0,r.up)("Icon");return(0,r.wg)(),(0,r.iD)("article",{class:"modal-wrapper",onClick:t[2]||(t[2]=function(t){return e.$emit("close")})},[(0,r._)("div",{class:"modal-wrapper__box",onClick:t[1]||(t[1]=function(e){e.stopPropagation()})},[(0,r._)("header",G,[(0,r._)("h2",null,(0,l.toDisplayString)(e.title),1),(0,r._)("nav",null,[(0,r._)("button",{type:"button",title:e.$t("base.close"),onClick:t[0]||(t[0]=function(t){return e.$emit("close")})},[(0,r.Wm)(s,{"icon-name":"x"})],8,M)])]),(0,r._)("div",K,[(0,r.WI)(e.$slots,"default",{},void 0,!0)])])])}],["__scopeId","data-v-479633a4"]]),N=["data-key"],A=["data-key"],P={class:"data-slide__handle"},z={class:"data-slide__body"},R={key:0},J=["href"],H=["href"],L={class:"data-slide__nav"},Q=["title","onClick"],Y=["title","onClick"],X={key:0,class:"data-slides__empty"};var ee=(0,r.aZ)({name:"Slides",components:{Icon:k.Z},props:{itemKey:String,items:{type:Array,required:!0}},setup:function(e,t){var a,r,l=(0,f.qj)({dragStartKey:void 0,dragPlaceholderKey:void 0});function n(e){return e.dataset.key?e:e.closest("li")}function i(e){e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect="move";var t=n(e.target);l.dragPlaceholderKey=Number(t.dataset.key)}function o(a){var r=n(a.target);if(l.dragStartKey!==l.dragPlaceholderKey){var i=(0,y.Jl)(e.items);i.splice(l.dragStartKey,1),i.splice(Number(r.dataset.key),0,(0,y.Jl)(e.items[l.dragStartKey])),t.emit("change-order",i)}}function s(){if(a&&r){for(var e=0;e<r.length;e++)r[e].removeEventListener("dragover",i),r[e].removeEventListener("drop",o),r[e].removeEventListener("dragend",s);a=void 0,r=void 0,l.dragStartKey=void 0,l.dragPlaceholderKey=void 0}}return{state:l,onMouseDown:function(e){a=e.target},onDragStart:function(e){if(a.closest(".data-slide__handle > i")){a=n(e.target),r=a.parentNode.children,l.dragStartKey=Number(a.dataset.key);for(var t=0;t<r.length;t++)r[t].addEventListener("dragover",i),r[t].addEventListener("drop",o),r[t].addEventListener("dragend",s)}else e.preventDefault()}}},emits:{"change-order":null,edit:null,remove:null}});const te=(0,D.Z)(ee,[["render",function(e,t,a,n,i,o){var s=(0,r.up)("Icon");return(0,r.wg)(),(0,r.iD)("ul",{"data-key":e.itemKey,class:"data-slides"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.items,(function(a,n){return(0,r.wg)(),(0,r.iD)("li",{"data-key":n,draggable:!0,class:(0,l.normalizeClass)(["data-slide",e.state.dragStartKey===n&&"data-slide--start",e.state.dragStartKey!==e.state.dragPlaceholderKey&&e.state.dragPlaceholderKey===n&&"data-slide--placeholder"]),onMousedown:t[0]||(t[0]=function(){return e.onMouseDown&&e.onMouseDown.apply(e,arguments)}),onDragstart:t[1]||(t[1]=function(){return e.onDragStart&&e.onDragStart.apply(e,arguments)})},[(0,r._)("div",P,[(0,r._)("i",null,[(0,r.Wm)(s,{"icon-name":"menu-flat"})])]),(0,r._)("div",z,[(0,r._)("h4",{class:(0,l.normalizeClass)(a.title?"":"none")},(0,l.toDisplayString)(a.title||"None"),3),a.description?((0,r.wg)(),(0,r.iD)("p",R,(0,l.toDisplayString)(a.description),1)):(0,r.kq)("v-if",!0),(0,r._)("nav",null,[(0,r._)("a",{href:a.src,target:"_blank"},(0,l.toDisplayString)(e.$t("base.image")),9,J),a.thumbnail?((0,r.wg)(),(0,r.iD)("a",{key:0,href:a.thumbnail,target:"_blank"},(0,l.toDisplayString)(e.$t("base.thumbnail")),9,H)):(0,r.kq)("v-if",!0)])]),(0,r._)("nav",L,[(0,r._)("button",{type:"button",title:e.$t("base.edit"),class:"edit",onClick:function(t){return e.$emit("edit",n)}},[(0,r.Wm)(s,{"icon-name":"edit"})],8,Q),(0,r._)("button",{type:"button",title:e.$t("base.remove"),class:"remove",onClick:function(t){return e.$emit("remove",n)}},[(0,r.Wm)(s,{"icon-name":"x"})],8,Y)])],42,A)})),256)),e.items&&e.items.length>0?(0,r.kq)("v-if",!0):((0,r.wg)(),(0,r.iD)("li",X,(0,l.toDisplayString)(e.$t("description.empty")),1))],8,N)}],["__scopeId","data-v-bc95d880"]]);var ae=te,re=function(e){return(0,r.dD)("data-v-7bce6621"),e=e(),(0,r.Cn)(),e}((function(){return(0,r._)("legend",null,"Manage slides group fields",-1)})),le={class:"fields"},ne={class:"field-basic"},ie={class:"field-title"},oe={for:"pref_key",class:"required"},se={class:"field-description"},de={class:"field-basic__body"},ue={class:"field-basic"},ce={class:"field-title"},pe={for:"pref_name"},me={class:"field-description"},fe={class:"field-basic__body"},be={class:"field-basic"},ye={class:"field-title"},ge={for:"pref_description"},_e={class:"field-description"},ve={class:"field-basic__body"},he={class:"field-basic"},Se={class:"field-title"},ke={for:"pref_slideType"},we={class:"field-description"},De={class:"field-basic__body"},Ce={key:0,class:"field-basic"},$e={class:"field-title"},Ue={for:"pref_slidesUrl"},Ve={class:"field-description"},xe={class:"field-basic__body"},Te={class:"submit-buttons"};var Ie=(0,r.aZ)({name:"ManageGroup",components:{FormText:_.Z,ButtonBasic:B.Z,FormRadio:h.Z},props:{form:Object},setup:function(e,t){var a=(0,b.QT)({useScope:"global"}).t,r=(0,f.qj)({form:e.form,error:{key:!1},slides:{type:e.form.slidesType||"array",url:e.form.slidesUrl||""}});return{state:r,onUpdateKey:function(e){e||(r.error.key=!0),r.error.key=!/^[a-zA-Z0-9_]+$/.test(e)},onSubmit:function(e){e.preventDefault();try{if(r.error.key)throw new Error("error value / key");t.emit("submit",r.form)}catch(e){window.dev&&console.error(e.message),alert(a("alert.errorSubmit"))}}}},emits:{submit:null}});const Ze=(0,D.Z)(Ie,[["render",function(e,t,a,n,i,o){var s=(0,r.up)("FormText"),d=(0,r.up)("FormRadio"),u=(0,r.up)("ButtonBasic");return(0,r.wg)(),(0,r.iD)("form",{onSubmit:t[5]||(t[5]=function(){return e.onSubmit&&e.onSubmit.apply(e,arguments)})},[(0,r._)("fieldset",null,[re,(0,r._)("div",le,[(0,r._)("div",ne,[(0,r._)("h3",ie,[(0,r._)("label",oe,(0,l.toDisplayString)(e.$t("base.groupKey")),1)]),(0,r._)("p",se,(0,l.toDisplayString)(e.$t("description.inputKeyOnGroup")),1),(0,r._)("div",de,[(0,r.Wm)(s,{name:"pref_key",id:"pref_key",placeholder:e.$t("base.inputKey"),inline:!0,required:!0,size:24,maxlength:20,color:e.state.error.key?"error":"",modelValue:e.state.form.key,"onUpdate:modelValue":[t[0]||(t[0]=function(t){return e.state.form.key=t}),e.onUpdateKey]},null,8,["placeholder","color","modelValue","onUpdate:modelValue"])])]),(0,r._)("div",ue,[(0,r._)("h3",ce,[(0,r._)("label",pe,(0,l.toDisplayString)(e.$t("base.name")),1)]),(0,r._)("p",me,(0,l.toDisplayString)(e.$t("description.setCategoryName")),1),(0,r._)("div",fe,[(0,r.Wm)(s,{name:"pref_name",id:"pref_name",placeholder:e.$t("base.inputText"),maxlength:32,modelValue:e.state.form.name,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.state.form.name=t})},null,8,["placeholder","modelValue"])])])]),(0,r._)("div",be,[(0,r._)("h3",ye,[(0,r._)("label",ge,(0,l.toDisplayString)(e.$t("base.description")),1)]),(0,r._)("p",_e,(0,l.toDisplayString)(e.$t("description.setCategoryDescription")),1),(0,r._)("div",ve,[(0,r.Wm)(s,{name:"pref_description",id:"pref_description",placeholder:e.$t("base.inputText"),maxlength:80,modelValue:e.state.form.description,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.state.form.description=t})},null,8,["placeholder","modelValue"])])]),(0,r._)("div",he,[(0,r._)("h3",Se,[(0,r._)("label",ke,(0,l.toDisplayString)(e.$t("title.selectSlidesType")),1)]),(0,r._)("p",we,(0,l.toDisplayString)(e.$t("description.selectSlidesType"))+" "+(0,l.toDisplayString)("edit"===e.form.type?e.$t("description.selectSlidesType2"):""),1),(0,r._)("div",De,[(0,r.Wm)(d,{type:"button",name:"pref_slideType",id:"prof_slideType",title:e.$t("title.selectSlidesType"),items:[{key:"array",label:e.$t("base.array")},{key:"url",label:"URL ".concat(e.$t("base.address"))}],modelValue:e.state.form.slidesType,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.state.form.slidesType=t})},null,8,["title","items","modelValue"])])]),"url"===e.state.form.slidesType?((0,r.wg)(),(0,r.iD)("div",Ce,[(0,r._)("h3",$e,[(0,r._)("label",Ue,(0,l.toDisplayString)(e.$t("title.slidesUrlAddress")),1)]),(0,r._)("p",Ve,(0,l.toDisplayString)(e.$t("description.inputSlidesUrl")),1),(0,r._)("div",xe,[(0,r.Wm)(s,{name:"pref_slidesUrl",id:"pref_slidesUrl",placeholder:e.$t("base.inputUrl"),required:!0,modelValue:e.state.form.slidesUrl,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.state.form.slidesUrl=t})},null,8,["placeholder","modelValue"])])])):(0,r.kq)("v-if",!0),(0,r._)("nav",Te,[(0,r._)("div",null,[(0,r.Wm)(u,{type:"submit",color:"key",inline:!0},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,l.toDisplayString)("add"===e.form.type?e.$t("label.addGroup"):e.$t("label.editGroup")),1)]})),_:1})])])])],32)}],["__scopeId","data-v-7bce6621"]]);var qe=Ze,We=function(e){return(0,r.dD)("data-v-d5b3b444"),e=e(),(0,r.Cn)(),e}((function(){return(0,r._)("legend",null,"Manage slide fields",-1)})),je={class:"fields"},Fe={class:"field-basic"},Be={class:"field-title"},Ge={for:"pref_src",class:"required"},Me={class:"field-description"},Ke={class:"field-multiple"},Oe={class:"field-multiple__body"},Ee={class:"field-basic"},Ne={class:"field-title"},Ae={for:"pref_thumbnail"},Pe={class:"field-description"},ze={class:"field-multiple"},Re={class:"field-multiple__body"},Je={class:"field-basic"},He={class:"field-title"},Le={for:"pref_title"},Qe={class:"field-description"},Ye={class:"field-basic__body"},Xe={class:"field-basic"},et={class:"field-title"},tt={for:"pref_description"},at={class:"field-description"},rt={class:"field-basic__body"},lt={class:"submit-buttons"};var nt=(0,r.aZ)({name:"ManageSlide",components:{FormText:_.Z,ButtonBasic:B.Z},props:{form:Object},setup:function(e,t){var a=(0,b.QT)({useScope:"global"}).t,r=(0,f.qj)({form:e.form}),l=(0,f.iH)(null),n=(0,f.iH)(null);return{state:r,src:l,thumbnail:n,onClickCheckUrl:function(e){if((0,g.DN)(r.form[e]))window.open(r.form[e]);else switch(alert(a("alert.invalidAddress")),e){case"src":l.value.focus();break;case"thumbnail":n.value.focus()}},onSubmit:function(e){e.preventDefault();try{if(!r.form.src||!(0,g.DN)(r.form.src))throw l.value.focus(),new Error("no image src address");t.emit("submit",r.form)}catch(e){window.dev&&console.error(e.message),alert(a("alert.errorSubmit"))}}}},emits:{submit:null}});const it=(0,D.Z)(nt,[["render",function(e,t,a,n,i,o){var s=(0,r.up)("FormText"),d=(0,r.up)("ButtonBasic");return(0,r.wg)(),(0,r.iD)("form",{onSubmit:t[6]||(t[6]=function(){return e.onSubmit&&e.onSubmit.apply(e,arguments)})},[(0,r._)("fieldset",null,[We,(0,r._)("div",je,[(0,r._)("div",Fe,[(0,r._)("h3",Be,[(0,r._)("label",Ge,(0,l.toDisplayString)(e.$t("base.imageUrl")),1)]),(0,r._)("p",Me,(0,l.toDisplayString)(e.$t("description.inputImageUrl")),1),(0,r._)("div",Ke,[(0,r._)("div",Oe,[(0,r.Wm)(s,{ref:"src",name:"pref_src",id:"pref_src",placeholder:e.$t("base.inputUrl"),required:!1,modelValue:e.state.form.src,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.state.form.src=t})},null,8,["placeholder","modelValue"])]),(0,r._)("nav",null,[(0,r.Wm)(d,{type:"button",onClick:t[1]||(t[1]=function(t){return e.onClickCheckUrl("src")})},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,l.toDisplayString)(e.$t("base.openUrl")),1)]})),_:1})])])]),(0,r._)("div",Ee,[(0,r._)("h3",Ne,[(0,r._)("label",Ae,(0,l.toDisplayString)(e.$t("base.urlThumbnailUrl")),1)]),(0,r._)("p",Pe,(0,l.toDisplayString)(e.$t("description.inputThumbnailUrl")),1),(0,r._)("div",ze,[(0,r._)("div",Re,[(0,r.Wm)(s,{ref:"thumbnail",name:"pref_thumbnail",id:"pref_thumbnail",placeholder:e.$t("base.inputUrl"),modelValue:e.state.form.thumbnail,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.state.form.thumbnail=t})},null,8,["placeholder","modelValue"])]),(0,r._)("nav",null,[(0,r.Wm)(d,{type:"button",onClick:t[3]||(t[3]=function(t){return e.onClickCheckUrl("thumbnail")})},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,l.toDisplayString)(e.$t("base.openUrl")),1)]})),_:1})])])]),(0,r._)("div",Je,[(0,r._)("h3",He,[(0,r._)("label",Le,(0,l.toDisplayString)(e.$t("base.subject")),1)]),(0,r._)("p",Qe,(0,l.toDisplayString)(e.$t("description.inputSlideTitle")),1),(0,r._)("div",Ye,[(0,r.Wm)(s,{name:"pref_title",id:"pref_title",placeholder:e.$t("base.inputText"),modelValue:e.state.form.title,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.state.form.title=t})},null,8,["placeholder","modelValue"])])]),(0,r._)("div",Xe,[(0,r._)("h3",et,[(0,r._)("label",tt,(0,l.toDisplayString)(e.$t("base.description")),1)]),(0,r._)("p",at,(0,l.toDisplayString)(e.$t("description.inputDescriptionSlide")),1),(0,r._)("div",rt,[(0,r.Wm)(s,{name:"pref_description",id:"pref_description",placeholder:e.$t("base.inputText"),modelValue:e.state.form.description,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.state.form.description=t})},null,8,["placeholder","modelValue"])])])]),(0,r._)("nav",lt,[(0,r._)("div",null,[(0,r.Wm)(d,{type:"submit",color:"key",inline:!0},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,l.toDisplayString)("add"===e.form.type?e.$t("base.add"):e.$t("base.submitEdit")),1)]})),_:1})])])])],32)}],["__scopeId","data-v-d5b3b444"]]);var ot=it;function st(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function dt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?st(Object(a),!0).forEach((function(t){(0,F.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):st(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ut=(0,r.aZ)({name:"PreferenceDataManage",components:{Icon:k.Z,ButtonBasic:B.Z,ModalWrapper:E,Slides:ae,ManageGroup:qe,ManageSlide:ot},props:{tree:{type:Object,required:!0}},setup:function(e,t){var a,r=(0,b.QT)({useScope:"global"}).t,l=(0,f.qj)({fold:(a={},Object.keys(e.tree).forEach((function(e){a[e]=!1})),a),dragPlaceholder:void 0,showManageGroup:!1,showManageSlide:!1,manageFormGroup:void 0,editFormSlide:void 0}),n=(0,f.qj)({index:(0,f.Fl)((function(){return Object.keys(e.tree).map((function(t){return dt(dt({},e.tree[t]),{},{fold:Array.isArray(e.tree[t].slides),key:t})}))}))});function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;l.fold[e]=void 0===t?!l.fold[e]:t}return{state:l,computes:n,onUpdateSlides:function(a,r){var l=(0,y.Jl)(e.tree);l[a].slides=r,t.emit("update",l)},onToggleFold:i,onAddGroup:function(){l.manageFormGroup={type:"add",key:"",name:"",description:"",slidesType:"array",slidesUrl:""},l.showManageGroup=!0},onEditGroup:function(t){l.manageFormGroup={type:"edit",key:t,originalKey:t,name:e.tree[t].name,description:e.tree[t].description,slidesType:Array.isArray(e.tree[t].slides)?"array":"url",slidesUrl:"string"==typeof e.tree[t].slides?e.tree[t].slides:""},l.showManageGroup=!0},onRemoveGroup:function(a){if(confirm(r("confirm.remove"))){var l=(0,y.Jl)(e.tree);delete l[a],t.emit("update",l)}},onSubmitGroup:function(a){try{var n,i=function(t){if(!/^[a-zA-Z0-9_]+$/.test(t))throw new Error("Error key");if(e.tree[t])throw new Error("The value exists.");return o},o=a.key,s=a.originalKey,d=a.type,u=a.name,c=a.description,p=(a.slidesUrl,(0,y.Jl)(e.tree));switch(d){case"add":p[n=i(o)]={name:u,description:c,slides:"url"===a.slidesType?a.slidesUrl:[]};break;case"edit":if(!(n=s!==o?i(o):o))throw new Error("Not a valid key.");p[n]=dt(dt({},p[s]),{},{name:u,description:c}),"url"===a.slidesType?p[n].slides=a.slidesUrl:Array.isArray(p[n].slides)||(p[n].slides=[]),s!==o&&delete p[s]}t.emit("update",p),l.showManageGroup=!1}catch(e){window.dev&&console.error(e.message),alert(r("alert.errorSubmit"))}},onAddSlide:function(e){l.editFormSlide={type:"add",groupKey:e,src:"",thumbnail:"",title:"",description:""},l.showManageSlide=!0},onEditSlide:function(t,a){var r=e.tree[t].slides[a];l.editFormSlide={type:"edit",groupKey:t,key:a,src:r.src,thumbnail:r.thumbnail,title:r.title,description:r.description},l.showManageSlide=!0},onRemoveSlide:function(a,l){if(confirm(r("confirm.remove"))){var n=(0,y.Jl)(e.tree);n[a].slides.splice(l,1),t.emit("update",n)}},onSubmitSlide:function(a){var n=a.type,o=a.groupKey,s=a.key,d=a.src,u=a.thumbnail,c=a.title,p=a.description,m=(0,y.Jl)(e.tree);try{var f={src:d,thumbnail:u,title:c,description:p};switch(n){case"add":m[o].slides.push(f);break;case"edit":m[o].slides[s]=f}i(o,!0),t.emit("update",m),l.showManageSlide=!1}catch(e){window.dev&&console.error(e.message),alert(r("alert.errorSubmit"))}}}},emits:{update:null}});var ct=(0,D.Z)(ut,[["render",function(e,t,a,n,i,o){var s=(0,r.up)("Icon"),d=(0,r.up)("Slides"),u=(0,r.up)("ButtonBasic"),c=(0,r.up)("ManageGroup"),p=(0,r.up)("ModalWrapper"),m=(0,r.up)("ManageSlide");return(0,r.wg)(),(0,r.iD)("article",$,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.computes.index,(function(t,a){return(0,r.wg)(),(0,r.iD)("section",U,[(0,r._)("header",V,[(0,r._)("nav",null,[(0,r._)("button",{type:"button",title:e.$t("title.fold"),disabled:!t.fold,class:(0,l.normalizeClass)([t.fold?"fold":"minus",t.fold&&e.state.fold[t.key]&&"fold--on"]),onClick:function(a){return e.onToggleFold(t.key)}},[(0,r.Wm)(s,{"icon-name":t.fold?"arrow-down":"minus"},null,8,["icon-name"])],10,x)]),(0,r._)("h3",null,[(0,r._)("strong",null,[(0,r._)("b",null,(0,l.toDisplayString)(t.key),1),(0,r.Uk)(" "+(0,l.toDisplayString)(t.name)+" ",1),t.fold?((0,r.wg)(),(0,r.iD)("em",T,(0,l.toDisplayString)(t.slides.length),1)):(0,r.kq)("v-if",!0)]),t.description?((0,r.wg)(),(0,r.iD)("span",I,(0,l.toDisplayString)(t.description),1)):(0,r.kq)("v-if",!0)]),(0,r._)("nav",null,[t.fold?((0,r.wg)(),(0,r.iD)("button",{key:0,type:"button",title:e.$t("label.addSlide"),class:"add",onClick:function(a){return e.onAddSlide(t.key)}},[(0,r.Wm)(s,{"icon-name":"plus"})],8,Z)):(0,r.kq)("v-if",!0),(0,r._)("button",{type:"button",title:e.$t("label.editGroup"),class:"edit",onClick:function(a){return e.onEditGroup(t.key)}},[(0,r.Wm)(s,{"icon-name":"edit"})],8,q),(0,r._)("button",{type:"button",title:e.$t("label.removeGroup"),class:"remove",onClick:function(a){return e.onRemoveGroup(t.key)}},[(0,r.Wm)(s,{"icon-name":"x"})],8,W)])]),e.state.fold[t.key]&&t.fold?((0,r.wg)(),(0,r.j4)(d,{key:0,"item-key":t.key,items:t.slides,onChangeOrder:function(a){return e.onUpdateSlides(t.key,a)},onEdit:function(a){return e.onEditSlide(t.key,a)},onRemove:function(a){return e.onRemoveSlide(t.key,a)}},null,8,["item-key","items","onChangeOrder","onEdit","onRemove"])):(0,r.kq)("v-if",!0)])})),256)),(0,r._)("nav",j,[(0,r.Wm)(u,{title:e.$t("label.addGroup"),color:"key",onClick:e.onAddGroup},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,l.toDisplayString)(e.$t("label.addGroup")),1)]})),_:1},8,["title","onClick"])]),((0,r.wg)(),(0,r.j4)(r.lR,{to:"#modal"},[e.state.showManageGroup?((0,r.wg)(),(0,r.j4)(p,{key:0,title:e.$t("edit"===e.state.manageFormGroup.type?"label.editGroup":"label.addGroup"),class:"modal-edit-group",onClose:t[0]||(t[0]=function(t){return e.state.showManageGroup=!1})},{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{form:e.state.manageFormGroup,onSubmit:e.onSubmitGroup},null,8,["form","onSubmit"])]})),_:1},8,["title"])):(0,r.kq)("v-if",!0),e.state.showManageSlide?((0,r.wg)(),(0,r.j4)(p,{key:1,title:e.$t("edit"===e.state.editFormSlide.type?"label.editSlide":"label.addSlide"),class:"modal-edit-slide",onClose:t[1]||(t[1]=function(t){return e.state.showManageSlide=!1})},{default:(0,r.w5)((function(){return[(0,r.Wm)(m,{form:e.state.editFormSlide,onSubmit:e.onSubmitSlide},null,8,["form","onSubmit"])]})),_:1},8,["title"])):(0,r.kq)("v-if",!0)]))])}],["__scopeId","data-v-51c59f14"]]),pt=function(e){return(0,r.dD)("data-v-6ddde8ba"),e=e(),(0,r.Cn)(),e}((function(){return(0,r._)("legend",null,"Import data fields",-1)})),mt={class:"fields"},ft={class:"field-basic"},bt={class:"field-basic__body"},yt={key:0,class:"field-basic"},gt={class:"field-title"},_t={for:"pref_address"},vt={class:"field-description"},ht={class:"field-basic__body"},St={key:1,class:"field-basic"},kt={class:"field-title"},wt={for:"pref_address"},Dt={class:"field-description"},Ct={class:"field-basic__body"},$t={class:"submit-buttons"};var Ut=a(5861),Vt=a(7757),xt=a.n(Vt),Tt=a(3018),It=["accept","disabled"],Zt={class:"form-upload__body"};var qt=(0,r.aZ)({name:"FormUpload",components:{Icon:k.Z},props:{name:String,id:String,label:{type:String,default:"Please upload file"},disabled:Boolean,accept:String},setup:function(e,t){var a=(0,f.qj)({filename:""}),r=(0,f.iH)(null);return{state:a,input:r,onChange:function(e){e.target.files&&e.target.files[0]&&(a.filename=e.target.files[0].name,t.emit("change",e.target.files))},focus:function(){r.value.focus()}}},emits:{change:null}});const Wt=(0,D.Z)(qt,[["render",function(e,t,a,n,i,o){var s=(0,r.up)("Icon");return(0,r.wg)(),(0,r.iD)("label",{class:(0,l.normalizeClass)(["form","form-upload",e.disabled&&"form-upload--disabled"])},[(0,r._)("input",{ref:"input",type:"file",class:"form-upload__input",accept:e.accept,disabled:e.disabled,onChange:t[0]||(t[0]=function(){return e.onChange&&e.onChange.apply(e,arguments)})},null,40,It),(0,r._)("span",Zt,[(0,r.Wm)(s,{"icon-name":"file"}),(0,r._)("em",null,(0,l.toDisplayString)(e.state.filename||e.label),1),(0,r._)("i",null,[(0,r.Wm)(s,{"icon-name":"upload"})])])],2)}],["__scopeId","data-v-512bfc36"]]);var jt=Wt,Ft=(0,r.aZ)({name:"Preference_Data_ImportData",components:{FormRadio:h.Z,FormText:_.Z,FormUpload:jt,ButtonBasic:B.Z},setup:function(e,t){var a=(0,b.QT)({useScope:"global"}).t,r=(0,f.qj)({mode:"address",address:"https://raw.githubusercontent.com/redgoose-dev/slideshow/main/resource/example/tree.json",file:null,processing:!1}),l=(0,f.iH)(null),n=(0,f.iH)(null);function i(){return(i=(0,Ut.Z)(xt().mark((function e(i){var o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.preventDefault(),r.processing=!0,e.prev=2,e.t0=r.mode,e.next="address"===e.t0?6:"file"===e.t0?13:20;break;case 6:if(r.address){e.next=9;break}throw l.value.focus(),new Error("no address");case 9:return e.next=11,(0,Tt.SA)(r.address);case 11:return o=e.sent,e.abrupt("break",21);case 13:if(r.file){e.next=16;break}throw n.value.focus(),new Error("no file");case 16:return e.next=18,(0,Tt.Lc)(r.file);case 18:return o=e.sent,e.abrupt("break",21);case 20:throw new Error("no mode");case 21:Array.isArray(o)&&(o={default:{slides:o}}),(0,y.Sk)(o),t.emit("update",o),r.processing=!1,e.next=32;break;case 27:e.prev=27,e.t1=e.catch(2),window.dev&&console.error(e.t1.message),alert(a("alert.failedGetData")),r.processing=!1;case 32:case"end":return e.stop()}}),e,null,[[2,27]])})))).apply(this,arguments)}return{state:r,address:l,file:n,onSelectFile:function(e){e[0]&&(r.file=e[0])},onSubmit:function(e){return i.apply(this,arguments)}}},emits:{update:null}});const Bt=(0,D.Z)(Ft,[["render",function(e,t,a,n,i,o){var s=(0,r.up)("FormRadio"),d=(0,r.up)("FormText"),u=(0,r.up)("FormUpload"),c=(0,r.up)("ButtonBasic");return(0,r.wg)(),(0,r.iD)("form",{class:"import-data",onSubmit:t[2]||(t[2]=function(){return e.onSubmit&&e.onSubmit.apply(e,arguments)})},[(0,r._)("fieldset",null,[pt,(0,r._)("div",mt,[(0,r._)("div",ft,[(0,r._)("div",bt,[(0,r.Wm)(s,{name:"pref_mode",id:"prof_mode",title:e.$t("description.importDataMethod"),items:[{key:"address",label:e.$t("base.address")},{key:"file",label:e.$t("base.file")}],modelValue:e.state.mode,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.state.mode=t})},null,8,["title","items","modelValue"])])]),"address"===e.state.mode?((0,r.wg)(),(0,r.iD)("div",yt,[(0,r._)("h3",gt,[(0,r._)("label",_t,(0,l.toDisplayString)(e.$t("title.importDataByAddress")),1)]),(0,r._)("p",vt,(0,l.toDisplayString)(e.$t("description.getDataByRestAPI")),1),(0,r._)("div",ht,[(0,r.Wm)(d,{ref:"address",name:"pref_address",id:"pref_address",placeholder:e.$t("base.inputAddress"),modelValue:e.state.address,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.state.address=t})},null,8,["placeholder","modelValue"])])])):(0,r.kq)("v-if",!0),"file"===e.state.mode?((0,r.wg)(),(0,r.iD)("div",St,[(0,r._)("h3",kt,[(0,r._)("label",wt,(0,l.toDisplayString)(e.$t("title.importDataByFile")),1)]),(0,r._)("p",Dt,(0,l.toDisplayString)(e.$t("description.getJsonFile")),1),(0,r._)("div",Ct,[(0,r.Wm)(u,{ref:"file",accept:"application/json",label:e.$t("description.selectJsonFile"),onChange:e.onSelectFile},null,8,["label","onChange"])])])):(0,r.kq)("v-if",!0)]),(0,r._)("nav",$t,[(0,r._)("div",null,[(0,r.Wm)(c,{type:"submit",color:e.state.processing?"":"key",disabled:e.state.processing,inline:!0},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,l.toDisplayString)(e.state.processing?e.$t("base.processing"):e.$t("label.getData")),1)]})),_:1},8,["color","disabled"])])])])],32)}],["__scopeId","data-v-6ddde8ba"]]);var Gt=Bt,Mt=(0,r.aZ)({name:"PreferenceData",components:{FormText:_.Z,FormSelect:v.Z,FormRadio:h.Z,ButtonIcon:C,Manage:ct,ModalWrapper:E,ImportData:Gt},props:{structure:Object},setup:function(e,t){var a,r=(0,b.QT)({useScope:"global"}).t,l=(0,f.qj)({mode:"basic",showImportData:!1,textTreeColor:void 0}),n=(0,f.qj)({tree:"advanced"===l.mode?JSON.stringify(e.structure.tree,null,2):e.structure.tree});return{state:n,localState:l,onChangeMode:function(e){try{switch(e){case"basic":var t=JSON.parse(n.tree);if(!(0,y.Sk)(t))throw new Error("error tree");n.tree=t,l.mode=e;break;case"advanced":n.tree=(0,g.IC)(n.tree),l.mode=e}}catch(e){window.dev&&console.error(e.message),alert(r("alert.invalidData"))}},onUpdateTreeSource:function(e){a&&clearTimeout(a),a=setTimeout((function(){try{var a=JSON.parse(e);l.textTreeColor=void 0,t.emit("update",{tree:a})}catch(e){l.textTreeColor="error"}}),600)},onUpdateTreeUI:function(e){n.tree=e,t.emit("update",{tree:e})},onImportData:function(e){if("advanced"===l.mode)n.tree=(0,g.IC)(e);else n.tree=e;t.emit("update",{tree:e}),l.showImportData=!1}}},emits:{update:null}});var Kt=(0,D.Z)(Mt,[["render",function(e,t,a,f,b,y){var g=(0,r.up)("FormRadio"),_=(0,r.up)("ButtonIcon"),v=(0,r.up)("Manage"),h=(0,r.up)("FormText"),S=(0,r.up)("ImportData"),k=(0,r.up)("ModalWrapper");return(0,r.wg)(),(0,r.iD)("fieldset",n,[i,(0,r._)("div",o,[(0,r._)("div",s,[(0,r._)("h3",d,(0,l.toDisplayString)(e.$t("title.manageSlideData")),1),(0,r._)("div",u,[(0,r._)("div",c,[(0,r._)("nav",p,[(0,r._)("div",null,[(0,r.Wm)(g,{type:"button",name:"pref_mode",id:"prof_mode",title:e.$t("title.changeMode"),items:[{key:"basic",label:e.$t("base.basic")},{key:"advanced",label:e.$t("base.advanced")}],modelValue:e.localState.mode,"onUpdate:modelValue":e.onChangeMode,class:"manage-tree__mode"},null,8,["title","items","modelValue","onUpdate:modelValue"])]),(0,r._)("div",null,[(0,r.Wm)(_,{title:e.$t("title.importSlideData"),"icon-name":"download",class:"manage-tree__button",onClick:t[0]||(t[0]=function(t){return e.localState.showImportData=!0})},null,8,["title"])])]),(0,r._)("div",m,["basic"===e.localState.mode?((0,r.wg)(),(0,r.j4)(v,{key:0,tree:e.state.tree,onUpdate:e.onUpdateTreeUI},null,8,["tree","onUpdate"])):"advanced"===e.localState.mode?((0,r.wg)(),(0,r.j4)(h,{key:1,ref:"tree",type:"textarea",name:"pref_tree",id:"pref_tree",placeholder:e.$t("description.inputSlideDataCode"),rows:15,color:e.localState.textTreeColor,modelValue:e.state.tree,"onUpdate:modelValue":[t[1]||(t[1]=function(t){return e.state.tree=t}),e.onUpdateTreeSource]},null,8,["placeholder","color","modelValue","onUpdate:modelValue"])):(0,r.kq)("v-if",!0)])])])])]),((0,r.wg)(),(0,r.j4)(r.lR,{to:"#modal"},[e.localState.showImportData?((0,r.wg)(),(0,r.j4)(k,{key:0,title:e.$t("title.getSlideItems"),class:"pref-data__import-data",onClose:t[2]||(t[2]=function(t){return e.localState.showImportData=!1})},{default:(0,r.w5)((function(){return[(0,r.Wm)(S,{onUpdate:e.onImportData},null,8,["onUpdate"])]})),_:1},8,["title"])):(0,r.kq)("v-if",!0)]))])}],["__scopeId","data-v-5bd877e3"]])}}]);